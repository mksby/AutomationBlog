---
import BaseLayout from "@/layouts/BaseLayout.astro";
import { getCodeSnippets } from "@/lib/strapi";

const { data: snippets } = await getCodeSnippets();
---

<BaseLayout title="Snippets â€” Automation Blog">
  <h1 class="text-3xl font-bold sm:text-4xl">Snippets</h1>
  <p class="mt-2 text-text-muted">Useful code snippets for quick reference.</p>

  {snippets.length > 0 ? (
    <ul class="mt-8 grid gap-4" role="list">
      {snippets.map((snippet: any) => (
        <li>
          <a
            href={`/snippets/${snippet.slug}`}
            class="block rounded-xl border border-border p-5 transition-all hover:border-accent/50 hover:shadow-sm"
          >
            <div class="flex items-center justify-between gap-4">
              <h2 class="text-lg font-semibold text-text-body">{snippet.title}</h2>
              <span class="shrink-0 rounded-md bg-surface px-2.5 py-0.5 font-mono text-xs text-text-muted">
                {snippet.language}
              </span>
            </div>
            {snippet.description && (
              <p class="mt-2 text-sm text-text-muted">{snippet.description}</p>
            )}
          </a>
        </li>
      ))}
    </ul>
  ) : (
    <p class="mt-8 text-text-muted">No snippets yet. Check back soon!</p>
  )}
</BaseLayout>
