---
import TutorialLayout from "@/layouts/TutorialLayout.astro";
import { getTutorials, getTutorialBySlug } from "@/lib/strapi";

export async function getStaticPaths() {
  const { data: tutorials } = await getTutorials(1, 100);
  return tutorials.map((t: any) => ({ params: { slug: t.slug } }));
}

const { slug } = Astro.params;
const { data: tutorials } = await getTutorialBySlug(slug!);
const tutorial = tutorials[0];

if (!tutorial) return Astro.redirect("/404");
---

<TutorialLayout tutorial={tutorial} />
