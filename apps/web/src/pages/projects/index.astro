---
import BaseLayout from '../../layouts/BaseLayout.astro';
import { getProjects } from '../../lib/strapi';

const { data: projects } = await getProjects();
---

<BaseLayout title="Projects â€” Automation Blog">
  <h1>Projects</h1>
  <ul class="projects">
    {projects.map((project: any) => (
      <li>
        <a href={`/projects/${project.slug}`}>
          <h2>{project.title}</h2>
          {project.status && <span class={`badge ${project.status}`}>{project.status}</span>}
          {project.description && <p>{project.description}</p>}
        </a>
      </li>
    ))}
  </ul>
</BaseLayout>

<style>
  .projects { list-style: none; display: grid; gap: 1.5rem; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); }
  .projects a { text-decoration: none; color: inherit; display: block; padding: 1.5rem; border: 1px solid #e5e5e5; border-radius: 8px; transition: border-color 0.2s; }
  .projects a:hover { border-color: #6366f1; }
  .badge { display: inline-block; padding: 0.125rem 0.5rem; border-radius: 4px; font-size: 0.75rem; font-weight: 600; }
  .completed { background: #dcfce7; color: #166534; }
  .in-progress { background: #dbeafe; color: #1e40af; }
  .archived { background: #f3f4f6; color: #6b7280; }
</style>
